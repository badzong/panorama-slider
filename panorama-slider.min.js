function PSlider(h,a,e){this.debug=false;this.dots=true;this.dotActive="fa-circle";this.dotInactive="fa-circle-o";this.dotSize=0.04;this.chevrons=true;this.chevronLeft="fa-chevron-left";this.chevronRight="fa-chevron-right";this.chevronSize=0.1;this.interval=8000;this.currentSlide=0;this.circularBackground=false;this.circularBackgroundOffset=0;this.height=false;this.psliderPrefix="pslider-";this.psliderSlider=this.psliderPrefix+"slider";this.psliderFrame=this.psliderPrefix+"frame";this.psliderSlide=this.psliderPrefix+"slide";this.psliderDots=this.psliderPrefix+"dots";this.psliderDot=this.psliderPrefix+"dot";this.psliderChevron=this.psliderPrefix+"chevron";this.psliderChevronLeft=this.psliderChevron+"-left";this.psliderChevronRight=this.psliderChevron+"-right";this.psliderActive=this.psliderPrefix+"active";this.psliderInactive=this.psliderPrefix+"inactive";this.psliderHidden=this.psliderPrefix+"hidden";if(h){for(var d in h){if(h.hasOwnProperty(d)){this[d]=h[d]}}}this.index=a;this.element=$(e);this.frame=$(this.element.children()[0]);this.slides=this.frame.children();this.slideCount=this.slides.size();this.element.addClass(this.psliderSlider);this.frame.addClass(this.psliderFrame);this.slides.addClass(this.psliderSlide);this.backgroundUrl=this.element.css("background-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2").split(",")[0];if(this.backgroundUrl=="none"){this.log("Need background-image");return}this.log("width: "+this.element.width());this.log("slideCount: "+this.slideCount);if(this.dots){var c='<div class="'+this.psliderDots+'">';for(i=0;i<this.slideCount;++i){c+='<span class="'+this.psliderInactive+'">';c+='<i class="'+this.psliderActive+" fa "+this.dotActive+'"></i>';c+='<i class="'+this.psliderInactive+" fa "+this.dotInactive+'"></i>';c+="</span>"}c+="</div>";var f=this;this.element.append(c).find("."+this.psliderDots+" span").click(function(){f.dotClick($(this))})}if(this.chevrons){this.element.append('<div class="'+this.psliderChevron+" "+this.psliderChevronLeft+'"><i class="fa '+this.chevronLeft+'"></i></div>');this.element.append('<div class="'+this.psliderChevron+" "+this.psliderChevronRight+'"><i class="fa '+this.chevronRight+'"></i></div>');var g=this.element.find("."+this.psliderChevronLeft);var b=this.element.find("."+this.psliderChevronRight);var f=this;g.click(function(){f.leftClick()});b.click(function(){f.rightClick()})}if($().swipe){var f=this;this.element.swipe({swipeLeft:function(k,m,n,l,j){f.rightClick()},swipeRight:function(k,m,n,l,j){f.leftClick()},})}var f=this;$(window).resize(function(){f.load()});this.backgroundImage=new Image();this.backgroundImage.onload=function(){f.load()};this.backgroundImage.src=this.backgroundUrl}PSlider.prototype.log=function(a){if(this.debug){console.log("pslider["+this.index+"]: "+a)}};PSlider.prototype.slide=function(b){this.currentSlide=b%this.slideCount;var a=-this.currentSlide*this.element.width();if(b>this.slideCount-1&&this.circularBackground){this.circularBackgroundOffset-=this.slideCount*this.backgroundOffset}var c=(-this.currentSlide*this.backgroundOffset)+this.circularBackgroundOffset;this.element.css("background-position",c+"px 0");this.frame.css("margin-left",a+"px");if(this.dots){this.element.find("."+this.psliderDots+" span."+this.psliderActive).removeClass(this.psliderActive).addClass(this.psliderInactive);$(this.element.find("."+this.psliderDots+" span")[this.currentSlide]).removeClass(this.psliderInactive).addClass(this.psliderActive)}if(this.chevrons){this.element.find("."+this.psliderChevron).removeClass(this.psliderHidden);if(this.currentSlide==0){this.element.find("."+this.psliderChevronLeft).addClass(this.psliderHidden)}if(this.currentSlide==this.slideCount-1){this.element.find("."+this.psliderChevronRight).addClass(this.psliderHidden)}}};PSlider.prototype.nextSlide=function(){this.slide(this.currentSlide+1)};PSlider.prototype.leftClick=function(){if(this.currentSlide>0){this.slide(this.currentSlide-1)}this.play()};PSlider.prototype.rightClick=function(){if(this.currentSlide<this.slideCount-1){this.slide(this.currentSlide+1)}this.play()};PSlider.prototype.dotClick=function(a){var b=a.index();this.slide(b);this.play()};PSlider.prototype.play=function(){if(this.windowInterval){window.clearInterval(this.windowInterval)}var a=this;this.windowInterval=window.setInterval(function(){a.nextSlide()},this.interval)};PSlider.prototype.start=function(){this.slide(0);this.play()};PSlider.prototype.load=function(){this.log("load");this.frameWidth=this.element.width()*this.slideCount;this.frame.css("width",this.frameWidth+"px");this.slides.css("width",this.element.width()+"px");this.backgroundWidth=this.backgroundImage.width;this.backgroundHeight=this.backgroundImage.height;this.log(this.backgroundUrl+"("+this.backgroundWidth+"x"+this.backgroundHeight+")");this.backgroundOffset=Math.abs((this.backgroundWidth-this.element.width())/this.slideCount);this.log("backgroundOffset: "+this.backgroundOffset);var b=parseInt(this.backgroundHeight*this.dotSize);this.element.find("."+this.psliderDots).css("font-size",b+"px");var c=parseInt(this.backgroundHeight*this.chevronSize);var a={"font-size":c+"px",top:parseInt((this.backgroundHeight-c)/2)+"px",};this.element.find("."+this.psliderChevronLeft).css(a);this.element.find("."+this.psliderChevronRight).css(a);if(this.height){this.element.css("height",this.height+"px")}else{this.element.css("height",this.backgroundHeight+"px")}this.slide(this.currentSlide);this.play()};$.fn.pslider=function(a){this.each(function(c,d){var b=new PSlider(a,c,d);b.start()})};